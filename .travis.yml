language: cpp
compiler: gcc
sudo: require
dist: trusty

install:
  - sudo apt -y install git imagemagick

script:
  - sudo rm -rf /usr/bin/py* /usr/lib/py* /usr/lib/x86_64-linux-gnu/libpy* # DON'T TRY THIS AT HOME
  - sudo find /usr -type f -name '*setuptools*' -delete # DON'T TRY THIS AT HOME
  - bash -x generate_appimage.sh
  - ls -l *
  
after_success:
  - wget -c https://github.com/probonopd/uploadtool/raw/master/upload.sh
  - bash upload.sh Lector*.AppImage*
  
branches:
  except:
    - # Do not build tags that we create when we upload to GitHub Releases
    - /^(?i:continuous)/
